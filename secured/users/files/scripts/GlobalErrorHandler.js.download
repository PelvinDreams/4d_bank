function GlobalErrorHandler(){function t(){return window.app&&app.messages&&app.messages["error.technical"]||"Technical error"}function r(r,e,n,o,a){r.target&&(r=r.target.outerHTML),a||(a={});try{$.post("/jsError",{message:r,url:e||a.fileName||location.href,line:n||a.lineNumber,column:o||a.columnNumber,userAgent:navigator.userAgent,stack:a.stack})}catch(t){console&&console.log(t)}$.mobile&&alert(t()+": "+r)}function e(t,r,e){if(!(0==r.status||e&&e.suppressErrors)){var o=n(r);window.alertOnAjaxError?alertOnAjaxError(o,e):navigator.notification&&navigator.notification.alert?navigator.notification.alert(o,function(){return a(r.status)},""):(alert(o),a(r.status))}}function n(r){return 500==r.status?t():429===r.status||409===r.status?r.responseText||r.statusText:r.responseText&&o(r).startsWith("text/plain")?r.responseText:r.status+" "+r.statusText}function o(t){return t.getResponseHeader&&t.getResponseHeader("Content-Type")||""}function a(t){403==t&&($.mobile?app.reset():location.href="/")}this.init=function(){window.onerror=r,$(document).off("ajaxError").ajaxError(e)}}(new GlobalErrorHandler).init();